<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baca Berita</title>
    <!-- Boxicons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="./css/bootstrap.min.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./common.css">

    <style>
        #news-main-img img { height: 50vh; }  
        .berita { cursor: pointer; }
        .berita:hover .judul-berita {
            border-bottom: solid 3px orange;
        }
        .judul-berita, .tanggal-berita, .isi-berita {
            min-width: 90%;
            max-width: 90%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .commentator-photo {
            flex-basis: 25%;
        }
        .comment-actions i, .comment-actions small { cursor: pointer; }
        @media (max-width: 660px) {
            #news-main-img img { height: 20vh; }  
            .commentator-photo {
                flex-basis: 40%;
            }
            main {
                margin-bottom: 80px;
            }
        }
    </style>

    
</head>
<body>
    
    <header class="navbar navbar-dark bg-edark py-3">
        <div class="container-fluid d-flex align-items-center justify-content-between">
            <a href="./berita.html" title="Back" class="text-decoration-none text-white">
                <i class="bx bx-arrow-back fs-3"></i>
            </a>
            <p class="d-inline text-white m-0 fs-5">Baca Berita</p>
            <i class="bx bx-arrow-back fs-3 bg-edark text-edark"></i>
        </div>
    </header>
    
    <main class="container">
        <div class="row my-lg-5 my-3 px-lg-5">
            <div class="col-lg-8">
                <!-- Headline dan tanggal -->
                <section class="mb-3 text-center">
                    <h1 id="judulBerita"></h1>
                    <small><i class="bx bx-calendar"></i> <span id="tanggalBerita"></span></small>
                </section>
                <!-- Foto -->
                <section class="mb-3">
                    <div id="news-main-img" class="d-flex justify-content-center">
                        <img src="./assets/logo.jpg" alt="Gambar Utama Berita" class="" id="gambarBerita">
                    </div>
                </section>
                <!-- Isi Berita -->
                <section class="mb-3" id="contentBerita">
                    
                </section>
                <!-- Kirim komentar -->
                <section class="mb-3 bg-light p-3 rounded-3">
                    <div>
                        <h4>Komentar:</h4>
                    </div>
                    <div class="mb-3">
                        <form action="" method="post">
                            <div class="card shadow">
                                <div class="card-body">
                                    <textarea class="form-control" id="comment" rows="3" placeholder="Tuliskan komentar"></textarea>
                                </div>
                                <div class="card-footer d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary" title="Kirim komentar">Kirim <i class="bx bx-paper-plane"></i></button>
                                </div>
                            </div>
                        </form>
                        
                    </div>
                </section>
                <!-- Daftar Komentar -->
                <section class="d-flex flex-column">
                    <div class="komentar d-flex mb-3 border-bottom py-2">
                        <div class="commentator-photo pt-2 px-3">
                            <img src="./assets/anonim.jpg" alt="FK" class="img-fluid rounded-circle">
                        </div>
                        <div class="comment">
                            <p class="fw-bold m-0">Andi Maulana</p>
                            <small class="text-muted">1 jam yang lalu</small>
                            <p>Keren...</p>
                            <div class="d-flex align-items-center comment-actions">
                                <span class="me-2">
                                    <i class="bx bx-like me-2"></i><span>8</span>
                                </span>
                                <span class="me-4">
                                    <i class="bx bx-dislike me-2"></i><span></span>
                                </span>
                                <span>
                                    <small class="text-muted">Balas</small>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="komentar d-flex mb-3 border-bottom py-2">
                        <div class="commentator-photo pt-2 px-3">
                            <img src="./assets/anonim.jpg" alt="FK" class="img-fluid rounded-circle">
                        </div>
                        <div class="comment">
                            <p class="fw-bold m-0">Indra Anderson</p>
                            <small class="text-muted">10 jam yang lalu</small>
                            <p>Keren banget, fix cita-cita saya jadi polisi</p>
                            <div class="d-flex align-items-center">
                                <span class="me-2">
                                    <i class="bx bx-like me-2"></i><span>10</span>
                                </span>
                                <span class="me-4">
                                    <i class="bx bx-dislike me-2"></i><span></span>
                                </span>
                                <span>
                                    <small class="text-muted">Balas</small>
                                </span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-lg-4 px-4 my-3">
                <section>
                    <h4>Baca juga:</h4>
                    <div class="w-100 d-flex flex-column berita-lainnya">
                        
                    </div>       
                </section>                                            
            </div>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <script>
        const url = document.URL;
        const id = url.slice(url.search('#')+1);

        function getData(url, callback) {
            $.get(
                url, data => callback(data)
            );
        }

        function init() {            
            getData("./news.json", data => {
                const berita = data.filter(news => news.id == id)[0];
                console.log(berita);
                
                $('#judulBerita').html(berita.title);
                $('#tanggalBerita').html(berita.date);
                $('#gambarBerita').attr('src', `./assets/${berita.gambar}`);
                berita.content.forEach(p => {
                    $('#contentBerita').append(`<p>${p}</p>`);
                });
            });            
        }
        init();

        function showNews() {            
            getData("./news.json", data => {
                data.forEach(berita => {
                    $('.berita-lainnya').append(`
                        <div class="berita d-flex border p-2 mb-3" onclick="location.href = './baca-berita.html#${berita.id}'">
                            <div class="gambar-berita w-25 pe-2">
                                <img src="./assets/${berita.gambar}" alt="Gambar Berita" class="img-fluid">
                            </div>
                            <div class="info-berita w-75 d-flex flex-column">
                                <h6 class="m-0 judul-berita">${berita.title}</h6>
                                <small class="tanggal-berita my-2">
                                    <i class="bx bx-calendar"></i>${berita.date}
                                </small>
                                <small class="isi-berita">${berita.content[0]}</small>
                            </div>
                        </div>
                    `);
                });
            });            
        }
        showNews();
    </script>
</body>
</html>